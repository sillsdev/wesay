<project name="WeSay.ConfigTool.Tests" default="build" basedir=".">
	<target name="build">
		<property name="build.namespace" value="WeSay.ConfigTool.Tests" />
		<property name="build.namespace.dir" value="${path::combine(project.resource.dir, build.namespace)}" />

		<!-- review: usesourcepath will not work as the path of the source has been changed making it invalid -->
		<copy todir="${build.namespace.dir}" >
			<fileset basedir=".">
				<include name="**/*.resx" />
			</fileset>
			<filterchain>
				<replacestring from="\" to="/" />
			</filterchain>
		</copy>

		<resgen todir="${build.namespace.dir}">
			<resources>
				<include name="${build.namespace.dir}/**/*.resx" />
			</resources>
		</resgen>


	<csc target="library"
		output="${project.output.dir}/WeSay.ConfigTool.Tests.dll"
		doc="${project.output.dir}/doc/WeSay.ConfigTool.Tests.xml"
		debug="${build.debug}"
		define="${build.defines}">
	  <nowarn>
		<warning number="618,672,1591"/>
		<warning number="1699" if="${runtime.version=='2.0'}"/>
	  </nowarn>
	  <sources basedir=".">
		<include name="**/*.cs" />
	  </sources>
	  <references basedir="${project.output.dir}">
		<include name="Palaso.dll" />
		<include name="Palaso.TestUtilities.dll" />
		<include name="WeSay.Project.dll" />
		<include name="WeSay.Project.Tests.dll" />
		<include name="WeSay.ConfigTool.exe" />
		<include name="LexicalModel.dll" />
		<include name="WeSay.Foundation.dll" />
		<include name="System.Windows.Forms.dll" />
		<include name="nunit.framework.dll" />
		<include name="NUnitForms.dll" />
	  </references>
	  <resources dynamicprefix="true" basedir="..">
		  <include name="**/*.resources" />
	  </resources>
	</csc>
  </target>

  <target name="clean">
	<delete>
		<fileset>
			<include name="**/*.resources" />
			<include name="nant.resx.bak/**" />
			<include name="nant.resx.bak" />
		</fileset>
	</delete>
  </target>

  <target name="package">
	<copy todir="${package.src.dir}/icu.net">
	  <fileset refid="source-files" />
	</copy>
  </target>

</project>
